<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Giriş Yap - Gekkotari</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="auth-container">
            <h3 class="text-center mb-4 text-white">Tekrar Hoşgeldin</h3>
            
            <div class="text-center mb-4">
                <i class="fas fa-user-circle fa-4x text-success"></i>
            </div>

            <form id="girisFormu">
                <div class="mb-3">
                    <label class="form-label">E-posta Adresi</label>
                    <input type="text" id="email" class="form-control custom-input" placeholder="ornek@email.com">
                </div>
                <div class="mb-3">
                    <label class="form-label">Şifre</label>
                    <input type="password" id="sifre" class="form-control custom-input" placeholder="******">
                </div>
                
                <div class="d-flex justify-content-between mb-3">
                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="rememberMe">
                        <label class="form-check-label small" for="rememberMe" style="color: #bdc3c7;">Beni Hatırla</label>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary-custom w-100">Giriş Yap</button>
            </form>

            <div class="mt-4 text-center">
                <a href="kayit.html" class="text-decoration-none text-success">Hesabın yok mu? Hemen Kayıt Ol</a>
                <br>
                <a href="index.html" class="text-secondary text-decoration-none small mt-2 d-inline-block">Ana Sayfaya Dön</a>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        $(document).ready(function(){
            // Butona basınca burası çalışacak
            $("#girisFormu").submit(function(event){
                event.preventDefault(); // Sayfa yenilenmesini durdur

                // Değerleri al
                var email = $("#email").val().trim(); 
                var sifre = $("#sifre").val().trim();

                // 1. KUTULAR BOŞ MU? (Elle kontrol ediyoruz)
                if (email === "" || sifre === "") {
                    alert("Lütfen e-posta ve şifre alanlarını doldurun!");
                    return; // Kod burada dursun
                }

                // 2. ADMİN KONTROLÜ
                if (email === "admin@gekkotari.com" && sifre === "20077002") {
                    var adminKullanici = { kadi: "Yönetici", email: email, rol: "admin" };
                    localStorage.setItem("aktifOturum", JSON.stringify(adminKullanici));
                    alert("Yönetici girişi başarılı. Yönlendiriliyorsunuz...");
                    window.location.href = "index.html"; 
                    return; 
                }

                // 3. HESAP KONTROLÜ
                var kullanicilar = JSON.parse(localStorage.getItem("kullanicilar")) || [];
                
                // E-posta listede var mı?
                var bulunanKullanici = kullanicilar.find(k => k.email === email);

                if (!bulunanKullanici) {
                    // --- İŞTE BEKLEDİĞİN UYARI ---
                    alert("Böyle bir hesap bulunamadı! Lütfen e-postayı kontrol edin veya Kayıt Olun.");
                } else {
                    // E-posta doğru, Şifre doğru mu?
                    if (bulunanKullanici.sifre === sifre) {
                        localStorage.setItem("aktifOturum", JSON.stringify(bulunanKullanici));
                        alert("Giriş Başarılı! Hoşgeldin " + bulunanKullanici.kadi);
                        window.location.href = "index.html";
                    } else {
                        alert("Girdiğin şifre hatalı!");
                    }
                }
            });
        });
    </script>
</body>
</html>