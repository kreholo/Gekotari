<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Kayıt Ol - Gekkotari</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="auth-container">
            <h3 class="text-center mb-4 text-white">Aramıza Katıl</h3>
            
            <form id="kayitFormu">
                <div class="mb-3">
                    <label class="form-label">Kullanıcı Adı</label>
                    <input type="text" id="kAdi" class="form-control custom-input" placeholder="Örn: KeremHologlu" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">E-posta Adresi</label>
                    <input type="email" id="email" class="form-control custom-input" placeholder="ornek@email.com" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Şifre</label>
                    <input type="password" id="sifre" class="form-control custom-input" placeholder="******" required>
                </div>
                <div class="mb-3 form-check">
                    <input type="checkbox" class="form-check-input" id="kurallar">
                    <label class="form-check-label" for="kurallar">Kuralları kabul ediyorum</label>
                </div>
                
                <button type="submit" class="btn btn-primary-custom">Kayıt Ol</button>
            </form>

            <div class="mt-3 text-center">
                <a href="giris.html" class="text-decoration-none text-success">Zaten hesabın var mı? Giriş Yap</a>
                <br>
                <a href="index.html" class="text-secondary text-decoration-none small">Ana Sayfaya Dön</a>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        $(document).ready(function(){
            $("#kayitFormu").submit(function(event){
                event.preventDefault();

                var kAdi = $("#kAdi").val();
                var email = $("#email").val();
                var sifre = $("#sifre").val();
                var kuralKabul = $("#kurallar").is(":checked");

                if (!kuralKabul) {
                    alert("Lütfen kuralları kabul edin!");
                    return;
                }

                // 1. Mevcut kullanıcı listesini al (yoksa boş liste oluştur)
                var kullanicilar = JSON.parse(localStorage.getItem("kullanicilar")) || [];

                // 2. Bu e-posta daha önce alınmış mı kontrol et
                var varMi = kullanicilar.find(k => k.email === email);
                if (varMi) {
                    alert("Bu e-posta adresi zaten kayıtlı!");
                    return;
                }

                // 3. Yeni kullanıcıyı listeye ekle
                var yeniKullanici = {
                    kadi: kAdi,
                    email: email,
                    sifre: sifre
                };
                kullanicilar.push(yeniKullanici);

                // 4. Listeyi tekrar hafızaya kaydet
                localStorage.setItem("kullanicilar", JSON.stringify(kullanicilar));

                alert("Kayıt Başarılı! Şimdi giriş yapabilirsin.");
                window.location.href = "giris.html";
            });
        });
    </script>
</body>
</html>